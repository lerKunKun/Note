# 员工绩效与指标追踪模块 - 思路整理

> **目标**: 为跨境电商业务中台增加员工绩效管理和数据指标追踪功能
> **状态**: 💭 思路梳理中

---

## 🎯 核心价值

### 为什么需要这个模块？

1. **数据驱动管理** - 用数据说话，客观评估员工贡献
2. **激励机制** - 通过可量化的指标激励员工
3. **流程优化** - 发现瓶颈，优化工作流程
4. **透明化运营** - 让每个人知道自己的工作成果
5. **公平考核** - 避免主观评价，建立公平的绩效体系

---

## 📊 核心功能设计思路

### 1. 员工个人工作台

#### 我的数据看板
```
┌─────────────────────────────────────────┐
│  张三 - 运营专员          本月 | 本季度  │
├─────────────────────────────────────────┤
│  📦 刊登产品数           85  |  245    │
│  ⏱️  平均刊登时长        6min |  7min   │
│  ✅ 刊登成功率          98%  |  96%    │
│  📦 处理订单数          320  |  890    │
│  ⏱️  平均处理时长        3min |  4min   │
│  ⚠️  错误率             0.5% |  1.2%   │
│                                         │
│  🏆 本月排名: 第 2 / 15 名               │
│  📈 较上月提升: +12%                    │
└─────────────────────────────────────────┘
```

#### 个人任务清单
- 今日待刊登产品（来自产品库分配）
- 待处理订单（超过24小时未处理高亮）
- 待回传物流单号
- 待审批采购单

---

### 2. 按岗位分类的关键指标（KPI）

#### 运营人员 KPI
| 指标 | 计算方式 | 权重 | 目标值 | 数据来源 |
|:---|:---|:---:|:---:|:---|
| **刊登效率** | 月刊登产品数 | 30% | ≥ 80个/月 | `products` 表 `created_by` |
| **刊登质量** | 刊登成功率 | 20% | ≥ 95% | Shopify API 返回成功数/总数 |
| **时间效率** | 平均刊登时长 | 15% | ≤ 8分钟/个 | 操作日志（点击"刊登"到完成时间差） |
| **订单处理** | 月处理订单数 | 20% | ≥ 200个/月 | `orders` 表，关联处理人 |
| **准确率** | 订单处理错误率 | 15% | ≤ 2% | 错误订单数/总订单数 |

#### 采购人员 KPI
| 指标 | 计算方式 | 权重 | 目标值 | 数据来源 |
|:---|:---|:---:|:---:|:---|
| **采购及时性** | 缺货响应时间 | 30% | ≤ 2小时 | 缺货预警触发到下单时间 |
| **成本控制** | 平均采购成本降幅 | 25% | -5% YoY | 成本价对比历史数据 |
| **供应商管理** | 合作供应商数 | 15% | ≥ 10家 | `suppliers` 表 |
| **到货准时率** | 按时到货订单占比 | 20% | ≥ 90% | 采购单预计到货时间 vs 实际 |
| **质量合格率** | 无质量问题占比 | 10% | ≥ 98% | 质检记录 |

#### 物流人员 KPI
| 指标 | 计算方式 | 权重 | 目标值 | 数据来源 |
|:---|:---|:---:|:---:|:---|
| **回传及时性** | 24小时内回传率 | 40% | ≥ 95% | 订单支付时间到物流回传时间 |
| **回传准确率** | 单号正确率 | 30% | ≥ 99% | 物流商验证API |
| **处理量** | 月处理运单数 | 20% | ≥ 300个/月 | `orders` 表回传记录 |
| **客诉率** | 物流投诉占比 | 10% | ≤ 1% | 客服系统集成（可选） |

#### 财务人员 KPI
| 指标 | 计算方式 | 权重 | 目标值 | 数据来源 |
|:---|:---|:---:|:---:|:---|
| **数据录入及时性** | 当日完成率 | 40% | 100% | 成本录入时间戳 |
| **数据准确性** | 核算误差率 | 40% | ≤ 0.5% | 抽检对账结果 |
| **报表输出** | 报表按时交付率 | 20% | 100% | 报表生成记录 |

---

### 3. 团队管理视图（管理员/主管）

#### 部门数据对比
```
运营部门 - 本月绩效概览
┌─────────────────────────────────────────────────┐
│  总刊登数: 1,250 个          目标: 1,200 个 ✅   │
│  总订单处理: 4,800 个        目标: 4,500 个 ✅   │
│  平均错误率: 1.1%            目标: ≤2% ✅        │
│  平均效率: 6.5分钟/产品      目标: ≤8分钟 ✅     │
├─────────────────────────────────────────────────┤
│  团队成员绩效排名:                               │
│  🥇 张三  - 98分  (刊登85个, 错误率0.5%)        │
│  🥈 李四  - 95分  (刊登82个, 错误率0.8%)        │
│  🥉 王五  - 92分  (刊登78个, 错误率1.0%)        │
│  4️⃣  赵六  - 88分  (刊登75个, 错误率1.5%)       │
│  5️⃣  孙七  - 85分  (刊登70个, 错误率1.8%)       │
│  ⚠️  钱八  - 72分  (刊登55个, 错误率3.2%) 🔴     │
└─────────────────────────────────────────────────┘
```

#### 异常预警
- 🔴 员工连续3天未达标（自动提醒）
- 🟡 某岗位平均效率下降超过10%
- 🔴 高错误率员工（超过5%）
- 🟡 长时间无操作（可能离职风险）

---

### 4. 排行榜与激励机制

#### 多维度排行榜
- **效率之星** - 刊登速度最快
- **质量标兵** - 错误率最低
- **业绩冠军** - 处理量最大
- **进步之星** - 环比提升最多
- **全能选手** - 综合得分最高

#### 成就系统（游戏化）
```
🏅 成就徽章:
- 连续7天零错误 → "完美主义者"
- 单日刊登超过10个 → "效率达人"
- 月度排名第一 → "本月MVP"
- 连续3个月达标 → "常青树"
- 帮助新员工 → "良师益友"
```

---

### 5. 数据追踪与自动化

#### 自动记录的数据
| 数据类型 | 记录时机 | 存储表 |
|:---|:---|:---|
| **操作日志** | 每次关键操作 | `operation_logs` |
| **耗时统计** | 操作开始/结束 | 计算存入 `performance_stats` |
| **错误记录** | API 返回失败 | `error_logs` 关联员工 |
| **任务分配** | 管理员分配 | `task_assignments` |

#### 实时计算指标
```sql
-- 示例：计算张三本月刊登产品数
SELECT COUNT(*) 
FROM products 
WHERE created_by = (SELECT id FROM users WHERE username = 'zhangsan')
  AND created_at >= '2025-12-01'
  AND created_at < '2026-01-01';

-- 示例：计算平均刊登时长
SELECT AVG(duration_seconds) 
FROM operation_logs 
WHERE user_id = 123 
  AND action = 'product_publish'
  AND created_at >= '2025-12-01';
```

---

### 6. 报表与导出

#### 个人绩效报告
- PDF 自动生成（月度/季度/年度）
- 包含：数据图表、排名、奖惩记录、改进建议

#### 部门绩效报告
- Excel 导出，支持筛选和透视
- 对比历史数据（同比、环比）
- 异常数据标注

---

## 🗃️ 数据库设计思路

### 新增表（5张）

详细的表结构设计包括：
1. `performance_stats` - 绩效统计表
2. `operation_logs` - 操作日志表
3. `achievements` - 成就定义表
4. `user_achievements` - 用户成就记录
5. `kpi_targets` - KPI目标配置表

_（完整SQL见技术方案设计文档）_

---

## 🎨 UI/UX 设计思路

### 个人工作台布局
- 数据看板（卡片式）
- 趋势图表（折线图、柱状图）
- 任务列表（待办事项）
- 成就展示（徽章墙）

### 管理员视图
- 团队总览仪表盘
- 成员详情钻取
- 多维度数据对比
- 异常预警中心

---

## 🔧 技术实现思路

### 数据采集方式
1. **埋点采集** - 前端关键操作自动记录
2. **数据库触发器** - 自动统计
3. **定时任务汇总** - 每日凌晨统计

### 实时排行榜
- 使用 Redis Sorted Set 实现

### 权限控制
- 员工：只看自己+排名
- 主管：看本部门
- 管理员：看全公司

---

## 🤔 需要讨论的问题

### 1. 指标权重
- 不同岗位权重如何平衡？
- 是否根据业务淡旺季调整？

### 2. 公平性
- 新老员工经验差距如何处理？
- 不同店铺难度如何归一化？
- 客观因素影响（API故障）如何排除？

### 3. 隐私与透明度
- 排名是否公开？
- 是否展示倒数排名？

### 4. 激励机制
- 奖金如何与绩效挂钩？
- 是否引入惩罚机制？
- 如何防止刷数据作弊？

### 5. 技术细节
- 历史数据保留多久？
- 大数据量查询性能优化
- 数据准确性如何保证？

---

## 📝 与现有 PRD 的整合方式

### 建议作为新章节 4.8 插入

**章节标题**: `4.8 📊 员工绩效与数据分析系统`

**优先级**: P1（重要但非 MVP 必需，可在 Phase 2 实施）

**与其他模块的关联**:
- 数据来源于 4.1-4.7 所有模块
- 权限控制基于 4.1 Casbin 系统
- 操作日志来自 4.1 安全审计

---

## 🎯 价值评估

### 对管理层
- ✅ 数据化决策依据
- ✅ 发现优秀员工
- ✅ 识别培训需求

### 对员工
- ✅ 明确工作目标
- ✅ 看到成长轨迹
- ✅ 公平的竞争环境

### 对业务
- ✅ 提升整体效率
- ✅ 降低错误率
- ✅ 优化流程

---

## ✅ 下一步行动

1. **讨论确认**
   - [ ] 与管理层确认绩效考核方向
   - [ ] 与各岗位确认 KPI 合理性
   - [ ] 确定隐私和透明度原则

2. **细化设计**
   - [ ] 完善数据库表结构
   - [ ] 设计计算公式
   - [ ] 规划 UI 原型

3. **整合到 PRD**
   - [ ] 作为 4.8 章节补充
   - [ ] 更新数据模型
   - [ ] 调整实施计划（Phase 2 或 Phase 3）




#### 1. **指标权重问题**

- 各岗位KPI权重是否合理？
- 是否需要根据业务淡旺季调整？

#### 2. **公平性问题**

- 新员工 vs 老员工经验差距如何平衡？
- 不同店铺难度不同（如品类、市场）如何归一化？
- 客观因素影响（如Shopify API故障）如何排除？

#### 3. **隐私与透明度**

- 排名是否公开？全员可见 vs 仅对本人+主管可见？
- 是否展示倒数排名？避免打击积极性

#### 4. **激励机制**

- 奖金/提成如何与绩效挂钩？
- 是否引入惩罚机制？还是纯激励？
- 如何防止"刷数据"作弊行为？

#### 5. **实施优先级**

- 是放在 **Phase 2**（与采购、财务一起）？
- 还是 **Phase 3**（MVP上线后单独开发）？

---

**思路整理版本**: V1.0  
**整理时间**: 2025-12-08  
**状态**: 待讨论确认
